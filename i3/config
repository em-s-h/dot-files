# This file has been auto-generated by i3-config-wizard(1).
# It will not be overwritten, so edit it as you like.
#
# Should you change your keyboard layout some time, delete
# this file and re-run i3-config-wizard(1).
#
# Please see https://i3wm.org/docs/userguide.html for a complete reference!
# i3 config file (v4)

# Main configs.

font pango:FiraCode Nerd Font Mono 10
title_align center

default_floating_border pixel 4
hide_edge_borders both

focus_follows_mouse no
mouse_warping none
focus_wrapping no

smart_gaps on
gaps inner 0
gaps outer 0

# Variables. {{{
set $refresh_i3status killall -SIGUSR1 i3status -c ~/.config/i3/i3status.conf
set $term kitty
set $mod Mod1
# }}}

# Use Mouse+$mod to drag floating windows to their wanted position
floating_modifier $mod

# exec {{{

# Set display layout && load random wallpaper.
exec --no-startup-id ~/.screenlayout/main.sh

# Start XDG autostart .desktop files using dex. See also
# https://wiki.archlinux.org/index.php/XDG_Autostart
exec --no-startup-id dex --autostart --environment i3

# NetworkManager is the most popular way to manage wireless networks on Linux,
# and nm-applet is a desktop environment-independent system tray GUI for it.
exec --no-startup-id nm-applet

exec --no-startup-id setxkbmap -layout "'br(nodeadkeys)' -option 'caps:swapescape'"

exec --no-startup-id redshift-gtk
exec --no-startup-id compton
exec $term
# }}}

# Bindings. {{{

# Start a terminal.
bindsym $mod+Shift+Return exec xfce4-terminal --drop-down
bindsym $mod+Return exec $term

# Screen capture.
bindsym --release Control+Print exec xfce4-screenshooter --region
bindsym --release Shift+Print exec xfce4-screenshooter --window
bindsym --release Print exec xfce4-screenshooter --fullscreen

# Reload the configuration file.
bindsym $mod+Shift+c reload

# Restart i3 inplace.
bindsym $mod+Shift+r restart

# Menus. {{{

# Program launcher.
bindsym $mod+d exec rofi -show run

# Power manager.
bindsym $mod+Shift+e exec ~/dev/scripts/power_menu.sh

# Keyboard layout menu.
bindsym $mod+Control+k exec ~/dev/scripts/kb_layout_menu.sh

# }}}

# Layout. {{{
# Resize mode.
bindsym $mod+r mode "resize"

# Enter fullscreen mode for the focused container.
bindsym $mod+f fullscreen toggle

# Split to the side.
bindsym $mod+s split h

# Split bellow.
bindsym $mod+b split v

# Change container layout.
# bindsym $mod+s layout stacking
bindsym $mod+w layout tabbed
bindsym $mod+e layout toggle split

# Toggle tiling / floating
bindsym $mod+Shift+space floating toggle

# Change focus between tiling / floating windows
bindsym $mod+space focus mode_toggle
#}}}

# Movement. {{{
# kill focused window
bindsym $mod+Shift+q kill

# change focus
bindsym $mod+h focus left
bindsym $mod+j focus down
bindsym $mod+k focus up
bindsym $mod+l focus right

# move focused window
bindsym $mod+Shift+h move left
bindsym $mod+Shift+j move down
bindsym $mod+Shift+k move up
bindsym $mod+Shift+l move right
# }}}

# }}}

# Workspaces. {{{

# Variables. {{{
set $ws1 "1: 󰈹"
set $ws2 "2: "
set $ws3 "3: "
set $ws4 "4: 󰮂"
set $ws5 "5"
set $ws6 "6"
set $ws7 "7"
set $ws8 "8: "
set $ws9 "9: "
set $ws10 "10: VM"

# }}} 

# Switch to workspace. {{{
bindsym $mod+1 workspace number $ws1
bindsym $mod+2 workspace number $ws2
bindsym $mod+3 workspace number $ws3; layout tabbed
bindsym $mod+4 workspace number $ws4
bindsym $mod+5 workspace number $ws5
bindsym $mod+6 workspace number $ws6
bindsym $mod+7 workspace number $ws7
bindsym $mod+8 workspace number $ws8
bindsym $mod+9 workspace number $ws9
bindsym $mod+0 workspace number $ws10; layout tabbed
# }}}

# Move focused container to workspace. {{{
bindsym $mod+Shift+1 move container to workspace number $ws1
bindsym $mod+Shift+2 move container to workspace number $ws2
bindsym $mod+Shift+3 move container to workspace number $ws3
bindsym $mod+Shift+4 move container to workspace number $ws4
bindsym $mod+Shift+5 move container to workspace number $ws5
bindsym $mod+Shift+6 move container to workspace number $ws6
bindsym $mod+Shift+7 move container to workspace number $ws7
bindsym $mod+Shift+8 move container to workspace number $ws8
bindsym $mod+Shift+9 move container to workspace number $ws9
bindsym $mod+Shift+0 move container to workspace number $ws10
# }}}

# Settings.
workspace 2 gaps inner 10

# }}}

# Force windows to certain workspaces. {{{
# Workspace 1 - Web browsers.
assign [class="Brave-browser"] $ws1
assign [class="firefox"] $ws1

# Workspace 2 - Terminals. {{{
assign [class="Xfce4-terminal"] $ws2
assign [class="Alacritty"] $ws2
assign [class="kitty"] $ws2

assign [class="UXTerm"] $ws2
assign [class="XTerm"] $ws2
# }}}

# Workspace 3 - Apps. {{{
assign [class="Gnome-encfs-manager"] $ws3
assign [class="Thunar"] $ws3
assign [class="Godot"] $ws3

assign [class="Audacity"] $ws3
assign [class="kdenlive"] $ws3
assign [class="krita"] $ws3
# }}}

# Workspace 4 - Games. {{{
assign [class="Shattered Pixel Dungeon"] $ws4
assign [class="duckstation-qt"] $ws4
assign [class="PPSSPPSDL"] $ws4
assign [class="pcsx2-qt"] $ws4

assign [class="melonDS"] $ws4
assign [class="Citra"] $ws4
assign [class="mGBA"] $ws4

assign [class="dolphin-emu"] $ws4
assign [class="Mednaffe"] $ws4
assign [class="redream"] $ws4

assign [title="Mesen"] $ws4
assign [class="Hiro"] $ws4

assign [class="retroarch"] $ws4
# }}}

# Workspace 8 - Media. {{{
assign [class="libreoffice-startcenter"] $ws8
assign [class="Ristretto"] $ws8
assign [class="Rhythmbox"] $ws8
assign [class="Parole"] $ws8
# }}}

# Workspace 9 - Settings.
assign [class="Xfce4-settings-manager"] $ws9
assign [class="Lxappearance"] $ws9
assign [class="Arandr"] $ws9

# Workspace 10 - VMs.
assign [class="VirtualBox Manager"] $ws10
assign [class="VirtualBox Machine"] $ws10
assign [title="VirtualBox"] $ws10
# }}}

# Window specific settings. {{{
for_window [title = "Picture-in-Picture"] sticky enable
# }}}

# Resize mode. {{{

# resize window (you can also use the mouse for that)
mode "resize" {
    # These bindings trigger as soon as you enter the resize mode
    # Pressing h will shrink the window’s width.
    # Pressing l will grow   the window’s width.

    # Pressing j will shrink the window’s height.
    # Pressing k will grow   the window’s height.

    bindsym j resize shrink height 5 px or 5 ppt
    bindsym k resize grow   height 5 px or 5 ppt

    bindsym h resize shrink width  5 px or 5 ppt
    bindsym l resize grow   width  5 px or 5 ppt

    # back to normal: Enter or Escape or $mod+r
    bindsym Return mode "default"
    bindsym Escape mode "default"
    bindsym $mod+r mode "default"
}
# }}}

# Bar & colors. {{{
# Colors.
set $bg-color 	         #423c4f
set $inactive-bg-color   #312b3e
set $text-color          #f3f4f5
set $inactive-text-color #676E7D
set $urgent-bg-color     #E53935

# Window colors.
#                       border              background         text                 indicator
client.focused          $bg-color           $bg-color          $text-color          #9735b7
client.unfocused        $inactive-bg-color  $inactive-bg-color $inactive-text-color #9735b7
client.focused_inactive $inactive-bg-color  $inactive-bg-color $inactive-text-color #9735b7
client.urgent           $urgent-bg-color    $urgent-bg-color   $text-color          #9735b7

# Start i3bar to display a workspace bar (plus the system information i3status
# finds out, if available)
bar {
    font pango:FiraCode Nerd Font 9.5
    status_command i3status -c ~/.config/i3/i3status.conf
    separator_symbol " :: "

    bindsym button1 nop
    position top

    # Volume controls.
    bindsym --release button3 exec --no-startup-id pactl set-sink-mute @DEFAULT_SINK@ toggle && $refresh_i3status
    bindsym button4 exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ +5% && $refresh_i3status
    bindsym button5 exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ -5% && $refresh_i3status

    colors {
		background $inactive-bg-color
	    separator #dbdbdb

		#                  border             background         text
		focused_workspace  $bg-color          $bg-color          $text-color
		inactive_workspace $inactive-bg-color $inactive-bg-color $inactive-text-color
		urgent_workspace   $urgent-bg-color   $urgent-bg-color   $text-color
	}
}
# }}}

# Other. {{{
# Use pactl to adjust volume in PulseAudio.

bindsym XF86AudioRaiseVolume exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ +5% && $refresh_i3status
bindsym XF86AudioLowerVolume exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ -5% && $refresh_i3status

bindsym XF86AudioMicMute exec --no-startup-id pactl set-source-mute @DEFAULT_SOURCE@ toggle && $refresh_i3status
bindsym XF86AudioMute exec --no-startup-id pactl set-sink-mute @DEFAULT_SINK@ toggle && $refresh_i3status
# }}}
