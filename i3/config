# i3 config file

# Main {{{
font pango:FiraCode Nerd Font Mono 10
title_align center

default_floating_border pixel 4
hide_edge_borders both

focus_follows_mouse no
mouse_warping none
focus_wrapping no

smart_gaps on
gaps inner 0
gaps outer 0

set $refresh_i3status killall -SIGUSR1 i3status -c ~/.config/i3/i3status.conf
set $term kitty
set $mod Mod1

# Use Mouse+$mod to drag floating windows to their wanted position
floating_modifier $mod
# }}}

# exec {{{
# Set display layout && load random wallpaper
exec --no-startup-id ~/.screenlayout/main.sh

# System tray for NetworkManager
exec --no-startup-id nm-applet

exec --no-startup-id setxkbmap -layout 'us' -option 'caps:swapescape'
exec --no-startup-id redshift-gtk

exec --no-startup-id picom
exec --no-startup-id dunst
exec $term
# }}}

# Bindings {{{

## Main {{{
# Start a terminal
bindsym $mod+Return exec $term

# Reload the configuration file
bindsym $mod+Shift+c reload

# Restart i3 inplace
bindsym $mod+Shift+r restart
# }}}

## Menus {{{
# Screen capture
bindsym --release Print exec ~/dev/scripts/screenshot.sh

# Program launcher
bindsym $mod+d exec rofi -show run

# Power manager
bindsym $mod+Shift+e exec ~/dev/scripts/power_menu.sh

# Keyboard layout menu
bindsym $mod+Control+k exec ~/dev/scripts/kb_layout_menu.sh
# }}}

## Audio {{{
# Use pactl to adjust volume in PulseAudio
bindsym $mod+F1 exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ -5% && $refresh_i3status
bindsym $mod+F2 exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ +5% && $refresh_i3status

# Set vol. min.
bindsym $mod+Shift+F1 exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ 0% && $refresh_i3status

# Set vol. max.
bindsym $mod+Shift+F2 exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ 100% && $refresh_i3status

# Mute vol.
bindsym $mod+F3 exec --no-startup-id pactl set-sink-mute @DEFAULT_SINK@ toggle && $refresh_i3status

# Mute mic.
bindsym $mod+Shift+F3  exec --no-startup-id pactl set-source-mute @DEFAULT_SOURCE@ toggle && $refresh_i3status

# Laptop keys
bindsym XF86AudioRaiseVolume exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ +5% && $refresh_i3status
bindsym XF86AudioLowerVolume exec --no-startup-id pactl set-sink-volume @DEFAULT_SINK@ -5% && $refresh_i3status
bindsym XF86AudioMicMute exec --no-startup-id pactl set-source-mute @DEFAULT_SOURCE@ toggle && $refresh_i3status
bindsym XF86AudioMute exec --no-startup-id pactl set-sink-mute @DEFAULT_SINK@ toggle && $refresh_i3status
# }}}

## Layout {{{
# Resize mode
bindsym $mod+r mode "resize"

# Enter fullscreen mode for the focused container
bindsym $mod+f fullscreen toggle

# Split to the side
bindsym $mod+s split h

# Split bellow
bindsym $mod+b split v

# Change container layout
# bindsym $mod+s layout stacking
bindsym $mod+w layout tabbed
bindsym $mod+e layout toggle split

# Toggle tiling / floating
bindsym $mod+Shift+space floating toggle

# Change focus between tiling / floating windows
bindsym $mod+space focus mode_toggle
#}}}

## Movement {{{
# kill focused window
bindsym $mod+Shift+q kill

# change focus
bindsym $mod+h focus left
bindsym $mod+j focus down
bindsym $mod+k focus up
bindsym $mod+l focus right

# move focused window
bindsym $mod+Shift+h move left
bindsym $mod+Shift+j move down
bindsym $mod+Shift+k move up
bindsym $mod+Shift+l move right
# }}}

# }}}

# Workspaces {{{

# Variables {{{
set $ws1 "1: 󰈹 "
set $ws2 "2:  "
set $ws3 "3:  "
set $ws4 "4: 󰮂 "
set $ws5 "5"
set $ws6 "6"
set $ws7 "7"
set $ws8 "8:  "
set $ws9 "9:  "
set $ws10 "10: VM "
# }}} 

# Switch to workspace {{{
bindsym $mod+1 workspace number $ws1
bindsym $mod+2 workspace number $ws2
bindsym $mod+3 workspace number $ws3; layout tabbed
bindsym $mod+4 workspace number $ws4
bindsym $mod+5 workspace number $ws5
bindsym $mod+6 workspace number $ws6
bindsym $mod+7 workspace number $ws7
bindsym $mod+8 workspace number $ws8
bindsym $mod+9 workspace number $ws9
bindsym $mod+0 workspace number $ws10; layout tabbed
# }}}

# Move focused container to workspace {{{
bindsym $mod+Shift+1 move container to workspace number $ws1
bindsym $mod+Shift+2 move container to workspace number $ws2
bindsym $mod+Shift+3 move container to workspace number $ws3
bindsym $mod+Shift+4 move container to workspace number $ws4
bindsym $mod+Shift+5 move container to workspace number $ws5
bindsym $mod+Shift+6 move container to workspace number $ws6
bindsym $mod+Shift+7 move container to workspace number $ws7
bindsym $mod+Shift+8 move container to workspace number $ws8
bindsym $mod+Shift+9 move container to workspace number $ws9
bindsym $mod+Shift+0 move container to workspace number $ws10
# }}}

# Settings
workspace 2 gaps inner 10

# }}}

# Force windows to workspaces {{{

## Workspace 1 - Web browsers {{{
assign [class="Brave-browser"] $ws1
assign [class="firefox"] $ws1
## }}}

## Workspace 2 - Terminals {{{
assign [class="Xfce4-terminal"] $ws2
assign [class="Alacritty"] $ws2
assign [class="kitty"] $ws2

assign [class="UXTerm"] $ws2
assign [class="XTerm"] $ws2
## }}}

## Workspace 3 - Apps {{{
assign [class="Gnome-encfs-manager"] $ws3
assign [class="Thunar"] $ws3
assign [class="Godot"] $ws3

assign [class="Audacity"] $ws3
assign [class="kdenlive"] $ws3
assign [class="okular"] $ws3
assign [class="krita"] $ws3
## }}}

## Workspace 4 - Games {{{
assign [class="Shattered Pixel Dungeon"] $ws4
assign [class="duckstation-qt"] $ws4
assign [class="PPSSPPSDL"] $ws4
assign [class="pcsx2-qt"] $ws4

assign [class="melonDS"] $ws4
assign [class="Citra"] $ws4
assign [class="mGBA"] $ws4

assign [class="dolphin-emu"] $ws4
assign [class="Mednaffe"] $ws4
assign [class="redream"] $ws4

assign [title="Mesen"] $ws4
assign [class="Hiro"] $ws4

assign [class="retroarch"] $ws4
## }}}

## Workspace 8 - Media {{{
assign [class="Ristretto"] $ws8
assign [class="Rhythmbox"] $ws8
assign [class="Parole"] $ws8
## }}}

## Workspace 9 - Settings {{{
assign [class="Xfce4-settings-manager"] $ws9
assign [class="Lxappearance"] $ws9
assign [class="Pavucontrol"] $ws9
assign [class="Arandr"] $ws9
## }}}

## Workspace 10 - Net {{{
assign [class="VirtualBox Manager"] $ws10
assign [class="VirtualBox Machine"] $ws10

assign [title="PacketTracer"] $ws10
assign [title="VirtualBox"] $ws10
## }}}

# }}}

# Window specific settings {{{
for_window [title = "Picture-in-Picture"] sticky enable
# }}}

# Resize mode {{{

# Resize window
mode "resize" {
    # These bindings trigger as soon as you enter the resize mode
    # Pressing h will shrink the window’s width
    # Pressing l will grow   the window’s width

    # Pressing j will shrink the window’s height
    # Pressing k will grow   the window’s height

    bindsym j resize shrink height 5 px or 5 ppt
    bindsym k resize grow   height 5 px or 5 ppt

    bindsym h resize shrink width  5 px or 5 ppt
    bindsym l resize grow   width  5 px or 5 ppt

    # back to normal: Enter or Escape or $mod+r
    bindsym Return mode "default"
    bindsym Escape mode "default"
    bindsym $mod+r mode "default"
}
# }}}

# Bar & colors {{{
# Colors

set $bg-color 	         #191421
set $inactive-bg-color   #191421
set $text-color          #ab47bc
set $inactive-text-color #787f8e
set $urgent-bg-color     #e53935

# Window colors
#                       border              background         text                 indicator
client.focused          $bg-color           $bg-color          $text-color          #9735b7
client.unfocused        $inactive-bg-color  $inactive-bg-color $inactive-text-color #9735b7
client.focused_inactive $inactive-bg-color  $inactive-bg-color $inactive-text-color #9735b7
client.urgent           $urgent-bg-color    $urgent-bg-color   $text-color          #9735b7

# Start i3bar to display a workspace bar
bar {
    font pango:FiraCode Nerd Font 10
    status_command i3status -c ~/.config/i3/i3status.conf

    separator_symbol " :: "
    position top

    bindsym button1 nop
    bindsym button2 nop
    bindsym button4 nop
    bindsym button5 nop

    colors {
		background $inactive-bg-color
	    separator $text-color
	    # separator #dbdbdb

		#                  border             background         text
		focused_workspace  $text-color        $bg-color          $text-color
		inactive_workspace $inactive-bg-color $inactive-bg-color $inactive-text-color
		urgent_workspace   $urgent-bg-color   $urgent-bg-color   #ffffff
	}
}
# }}}
